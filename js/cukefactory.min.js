/*!  - v0.0.1 - 2014-05-15 */var Step=function(a,b){var c=this;c.type=ko.observable(a),c.text=ko.observable(b),c.parameters=ko.observableArray([]),c.lines=ko.observableArray([]),c.rows=ko.observableArray([])},Scenario=function(a){var b=this;b.type=ko.observable("Scenario"),b.selected=ko.observable(!1),b.name=ko.observable(a),b.givens=ko.observableArray([]),b.whens=ko.observableArray([]),b.thens=ko.observableArray([]),b.steps=ko.computed(function(){return b.givens().concat(b.whens()).concat(b.thens())}),b.addStep=function(a){var c=a.type().toLowerCase();"given"==c?b.givens.push(a):"when"==c?b.whens.push(a):"then"==c&&b.thens.push(a)},b.scenarioClass=ko.computed(function(){var a=b.selected()?"cuke-selected":"";return a+("Background"==b.type()?" cuke-feature-background":"")})},Feature=function(a){var b=this;b.name=ko.observable(a),b.scenarios=ko.observableArray([]),b.addScenario=function(a){b.scenarios.push(a)},b.file=ko.observable(),b.selected=ko.observable(!1),b.selectScenario=function(a){b.scenarios().forEach(function(a){a.selected(!1)}),null!==a&&a.selected(!0)}},FeaturesViewModel=function(){var a=this;a.features=ko.observableArray([]),a.selectedFeature=ko.observable(null),a.selectedScenario=ko.observable(null),a.newScenario=ko.observable(null),a.onNewScenario=function(){},a.createNewScenario=function(){var b=new Scenario("New Scenario");a.selectedFeature(null),a.newScenario(b),a.onNewScenario()},a.selectFeature=function(b){a.selectedScenario(null),a.newScenario(null),a.features().forEach(function(a){a.selected(!1)}),b.selected(!0),b.selectScenario(null),a.selectedFeature(b)},a.selectScenario=function(b){a.selectedScenario(b),null!==a.selectedFeature()&&a.selectedFeature().selectScenario(b)},a.browseFeatures=function(){a.selectedFeature(null),a.selectedScenario(null),a.newScenario(null)},a.loadFeatures=function(){$.getJSON("http://localhost:8080/cukes",function(b){var c=[];$.each(b.features,function(a,b){var d=new Feature(b.name);if(d.file(b.file),$.each(b.scenarios,function(a,b){var c=new Scenario(b.name);$.each(b.steps,function(a,b){var d=new Step(b.type,b.text);b.lines.forEach(function(a){d.lines.push(a)}),b.rows.forEach(function(a){d.rows.push(a)}),c.addStep(d)}),d.addScenario(c)}),void 0!==b.background&&null!==b.background){var e=new Scenario("Background");e.type("Background"),$.each(b.background.steps,function(a,b){var c=new Step(b.type,b.text);e.addStep(c)}),d.scenarios.splice(0,0,e)}c.push(d)}),a.features(c)}).error(function(a,b){console.log("error: "+b)})},a.allSteps=ko.computed(function(){return $.map(a.features(),function(a){return $.map(a.scenarios(),function(a){return $.map(a.steps(),function(a){return a})})})}),a.searchBoxIndex=ko.observableArray(),a.refreshSearchBox=function(){$.getJSON("http://localhost:8080/searchindex",function(b){a.searchBoxIndex(b)})}};ko.bindingHandlers.intoView={update:function(a,b){var c=ko.unwrap(b());void 0!==c&&$(a).scrollintoview()}};